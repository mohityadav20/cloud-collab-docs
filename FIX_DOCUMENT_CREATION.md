# Fix Document Creation Error

## Problem
Getting `DynamoDB:DynamoDbException` error when creating documents:
```
Failed to create document: {data: {createDocument: null}, errors: [...]}
```

## Root Cause
The `owner` field in the Document type is required but not being auto-populated correctly by the `@auth` directive. The schema has been updated to fix this, but the backend needs to be redeployed.

## Solution

### Step 1: Redeploy Backend
The schema has been updated to remove conflicting custom input types. You need to push these changes:

```bash
amplify push
```

This will:
- Update the GraphQL API schema
- Regenerate resolvers
- Ensure `owner` field is auto-populated from Cognito user

### Step 2: Verify the Fix
After redeploying:
1. Try creating a document again
2. Check that the `owner` field is automatically set to your Cognito username
3. Verify documents are created successfully

## What Was Changed

1. **Schema (`amplify/backend/api/cc2/schema.graphql`)**:
   - Removed custom `CreateDocumentInput`, `UpdateDocumentInput`, `ShareDocumentInput` 
   - These are auto-generated by `@model` directive
   - Added explicit `ownerField: "owner"` to `@auth` directive for clarity

2. **Component (`src/components/documents/CreateDocumentButton.tsx`)**:
   - Updated to use auto-generated mutation from `mutations.js`
   - Provides only `title`, `content`, `ownerEmail` in input
   - `owner` field is auto-populated by backend resolver

## Notes

- The `owner` field should be automatically populated from the authenticated Cognito user
- The resolver handles this when `@auth(rules: [{ allow: owner }])` is used
- After redeploy, the error should be resolved

## Testing

After redeploying, test document creation:
1. Sign in to your app
2. Click "+ New Document"
3. Verify document is created without errors
4. Check that `owner` field is set correctly in DynamoDB

